<div class="main-container">
        
        <div class="cart-content-column">
            <div class="cart-main-content">
                <h1 class="cart-title">Shopping Cart</h1>
                <div class="cart-subtotal-header" id="cartHeaderPrice"></div>
                
                <div id="emptyCartMessage" class="empty-message" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    Your Shopping Cart is empty. Fill it with beautiful jewelry!
                </div>

                <div id="cartItems">
                    <!-- Dynamic cart items will be loaded here -->
                </div>
                
                <div style="text-align: right; padding-top: 15px;" id="cartSubtotalBottom">
                    <span class="summary-subtotal" style="font-size: 16px;">
                        Subtotal (<span id="items-count-bottom">3</span> items): <span style="color: var(--color-gold);" id="subtotal-bottom">₹16,997</span>
                    </span>
                </div>
            </div>
            
            <div class="saved-for-later-section" id="savedForLaterSection" style="display: none;">
                <div class="saved-main-content">
                    <h2 class="saved-title">Saved for Later</h2>
                    
                    <div id="emptySavedMessage" class="empty-message">
                           <i class="fas fa-bookmark"></i>
                           You have no items saved for later.
                    </div>

                    <div id="savedItemsContainer">
                        </div>
                </div>
            </div>
        </div>
        <div class="cart-summary-sidebar" id="cartSummarySidebar">
            <div class="summary-subtotal">
                Subtotal (<span id="items-count-sidebar">3</span> items): <span style="float: right;" id="subtotal-sidebar">₹16,997</span>
            </div>
            
            <label class="flex-row" style="gap: 10px; font-size: 14px; margin-bottom: 15px;">
                <input type="checkbox" checked style="accent-color: var(--color-gold);">
                This order contains a gift
            </label>

            <a href="#" class="checkout-btn">Proceed to Buy</a>
        </div>
    </div>
    
    
    <div class="recommendation-section">
        <h2>Recommended For You</h2>
        <div class="recommendation-grid">
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/products/04_c9beb17b-9c96-433c-b50e-7c5f9e6d800a.jpg?v=1744528078&width=900" alt="Rec 1" class="recommended-image"><div class="recommended-name">Love Hug Ring</div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/PM-NECKLACE-215_1_0fa33ea7-3e18-4ece-8e27-d684164d5a40.jpg?v=1744527906&width=900" class="recommended-image"><div class="recommended-name">Heart Rays Necklace</div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/PM-NECKLACE-102-011_a91b6cdd-0813-447d-aeae-aef2ef5a5c4b.jpg?v=1744528810&width=900" alt="Rec 3" class="recommended-image"><div class="recommended-name">Ekansha Diamond Mangalsutra</div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/look_2_sq1_b88a5567-9f8a-40ab-aa36-e6301c8bc8d8.webp?v=1744527051&width=900" alt="Rec 4" class="recommended-image"><div class="recommended-name">Solitaire Ring</div></a>
            <a href="#" class="recommended-item"><img src="https://i.pinimg.com/originals/bb/41/08/bb41087c41d52f0637c131b844ccd037.jpg" alt="Rec 5" class="recommended-image"><div class="recommended-name">Waist Chain</div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/BR090G-4.jpg?v=1744526375&width=900" alt="Rec 6" class="recommended-image"><div class="recommended-name">Bangle Bracelet</div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/PM-EARRINGS-032_1_ca866188-eb2f-491f-ae6d-e42e9501725b.jpg?v=1744528692&width=900" alt="Rec 7" class="recommended-image"><div class="recommended-name">Solitaire Hoop Earrings </div></a>
            <a href="#" class="recommended-item"><img src="https://palmonas.com/cdn/shop/files/PM-NECKLACE-027-07.jpg?v=1749546317&width=900" alt="Rec 8" class="recommended-image"><div class="recommended-name">Diamond Mangalsutra</div></a>
        </div>
    </div>
    
    <div class="footer-info-container">
        <p class="promo-footer-link">
            The price and availability of items at Aurelia are subject to change. The shopping cart is a temporary place to store a list of your items and reflects each item's most recent price. Do you have a promotional code? <a href="#">We'll ask you to enter your claim code when it's time to pay.</a>
        </p>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 id="confirmModalTitle">Confirm Action</h3>
            <p id="confirmModalMessage"></p>
            <div class="modal-buttons">
                <button id="confirmCancelBtn" class="modal-btn modal-btn-cancel">Cancel</button>
                <button id="confirmOkBtn" class="modal-btn modal-btn-ok">Confirm</button>
            </div>
        </div>
    </div>

    <style>
        // Confirmation Modal Functions
        let confirmCallback = null;
        
        function showConfirmModal(title, message, onConfirm) {
            const modal = document.getElementById('confirmModal');
            document.getElementById('confirmModalTitle').textContent = title;
            document.getElementById('confirmModalMessage').textContent = message;
            confirmCallback = onConfirm;
            modal.style.display = 'flex';
        }
        
        function closeConfirmModal() {
            document.getElementById('confirmModal').style.display = 'none';
            confirmCallback = null;
        }
        
        document.getElementById('confirmCancelBtn').addEventListener('click', closeConfirmModal);
        document.getElementById('confirmOkBtn').addEventListener('click', () => {
            if (confirmCallback) confirmCallback();
            closeConfirmModal();
        });
        
        window.onclick = function(event) {
            if (event.target == document.getElementById('confirmModal')) {
                closeConfirmModal();
            }
        };

        // Load cart and saved items on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await loadCart();
            await loadSavedForLater();
        });

        async function loadCart() {
            try {
                const response = await fetch('/api/cart');
                const data = await response.json();
                
                if (data.success && data.cart && data.cart.items.length > 0) {
                    renderCart(data.cart.items, data.cart.totalAmount);
                } else {
                    showEmptyCart();
                }
            } catch (error) {
                console.error('Error loading cart:', error);
                document.getElementById('cartItems').innerHTML = '<p style="color: #f44336; text-align: center; padding: 40px;">Error loading cart</p>';
            }
        }

        async function loadSavedForLater() {
            try {
                const response = await fetch('/api/saved-for-later');
                const data = await response.json();
                
                if (data.success) {
                    renderSavedForLater(data.products);
                }
            } catch (error) {
                console.error('Error loading saved items:', error);
            }
        }

        function renderCart(items, totalAmount) {
            const container = document.getElementById('cartItems');
            const emptyMessage = document.getElementById('emptyCartMessage');
            const cartHeader = document.getElementById('cartHeaderPrice');
            const subtotalBottom = document.getElementById('cartSubtotalBottom');
            const sidebar = document.getElementById('cartSummarySidebar');
            
            if (emptyMessage) emptyMessage.style.display = 'none';
            if (cartHeader) cartHeader.style.display = 'flex';
            if (subtotalBottom) subtotalBottom.style.display = 'block';
            if (sidebar) sidebar.style.display = 'block';
            
            let totalItems = 0;
            container.innerHTML = items.map(item => {
                totalItems += item.quantity;
                const product = item.product;
                const imageUrl = product.image || (product.images && product.images.length > 0 ? (product.images[0].url || product.images[0]) : '/images/placeholder.jpg');
                return `
                    <div class="cart-item" data-product-id="${product._id}" data-price="${item.price}">
                        <img src="${imageUrl}" alt="${product.name}" class="product-image" onerror="this.src='/images/placeholder.jpg'">
                        <div class="product-details">
                            <div class="product-name">${product.name}</div>
                            <div class="product-description">${product.description || ''}</div>
                            <div class="item-price-quantity">
                                <div class="quantity-selector">
                                    <button class="qty-btn" onclick="updateQuantity('${product._id}', ${item.quantity - 1})">-</button>
                                    <span class="qty-display">${item.quantity}</span>
                                    <button class="qty-btn" onclick="updateQuantity('${product._id}', ${item.quantity + 1})">+</button>
                                </div>
                                <div class="price">₹${(item.price * item.quantity).toLocaleString('en-IN')}</div>
                            </div>
                            <div class="item-actions">
                                <a href="#" class="action-link" onclick="event.preventDefault(); removeFromCart('${product._id}')">Delete</a> |
                                <a href="#" class="action-link" onclick="event.preventDefault(); saveForLater('${product._id}')">Save for later</a>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('items-count-bottom').textContent = totalItems;
            document.getElementById('items-count-sidebar').textContent = totalItems;
            document.getElementById('subtotal-bottom').textContent = '₹' + totalAmount.toLocaleString('en-IN');
            document.getElementById('subtotal-sidebar').textContent = '₹' + totalAmount.toLocaleString('en-IN');
        }

        function renderSavedForLater(products) {
            const savedSection = document.getElementById('savedForLaterSection');
            const savedContainer = document.getElementById('savedItemsContainer');
            const emptyMessage = document.getElementById('emptySavedMessage');
            
            if (!products || products.length === 0) {
                savedSection.style.display = 'block';
                emptyMessage.style.display = 'flex';
                savedContainer.innerHTML = '';
                return;
            }
            
            savedSection.style.display = 'block';
            emptyMessage.style.display = 'none';
            
            savedContainer.innerHTML = products.map(product => {
                const imageUrl = product.image || (product.images && product.images.length > 0 ? (product.images[0].url || product.images[0]) : '/images/placeholder.jpg');
                return `
                    <div class="cart-item saved-item" data-product-id="${product._id}">
                        <img src="${imageUrl}" alt="${product.name}" class="product-image" onerror="this.src='/images/placeholder.jpg'">
                        <div class="product-details">
                            <div class="product-name">${product.name}</div>
                            <div class="product-description">${product.description || ''}</div>
                            <div class="item-price-quantity">
                                <div class="price">₹${product.price.toLocaleString('en-IN')}</div>
                            </div>
                            <div class="item-actions">
                                <a href="#" class="action-link" onclick="event.preventDefault(); moveToCart('${product._id}')">Move to Cart</a> |
                                <a href="#" class="action-link" onclick="event.preventDefault(); removeSaved('${product._id}')">Delete</a>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showEmptyCart() {
            const emptyMessage = document.getElementById('emptyCartMessage');
            const cartHeader = document.getElementById('cartHeaderPrice');
            const subtotalBottom = document.getElementById('cartSubtotalBottom');
            const sidebar = document.getElementById('cartSummarySidebar');
            
            if (emptyMessage) emptyMessage.style.display = 'flex';
            if (cartHeader) cartHeader.style.display = 'none';
            if (subtotalBottom) subtotalBottom.style.display = 'none';
            if (sidebar) sidebar.style.display = 'none';
            
            document.getElementById('cartItems').innerHTML = '';
        }

        async function updateQuantity(productId, newQuantity) {
            if (newQuantity < 1) return;
            
            try {
                const response = await fetch(`/api/cart/update/${productId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ quantity: newQuantity })
                });
                
                if (response.ok) {
                    await loadCart();
                }
            } catch (error) {
                console.error('Error updating quantity:', error);
            }
        }

        async function removeFromCart(productId) {
            showConfirmModal('Remove Item', 'Are you sure you want to remove this item from your cart?', async () => {
                try {
                    const response = await fetch(`/api/cart/remove/${productId}`, {
                        method: 'DELETE'
                    });
                    
                    if (response.ok) {
                        await loadCart();
                        showNotification('Item removed from cart');
                    }
                } catch (error) {
                    console.error('Error removing item:', error);
                }
            });
        }

        async function saveForLater(productId) {
            try {
                const response = await fetch('/api/saved-for-later/add', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ productId })
                });
                
                if (response.ok) {
                    const removeResponse = await fetch(`/api/cart/remove/${productId}`, {
                        method: 'DELETE'
                    });
                    
                    if (removeResponse.ok) {
                        await loadCart();
                        await loadSavedForLater();
                        showNotification('Item saved for later');
                    }
                }
            } catch (error) {
                console.error('Error saving for later:', error);
            }
        }

        async function moveToCart(productId) {
            try {
                const response = await fetch(`/api/saved-for-later/move-to-cart/${productId}`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    await loadCart();
                    await loadSavedForLater();
                    showNotification('Item moved to cart');
                }
            } catch (error) {
                console.error('Error moving to cart:', error);
            }
        }

        async function removeSaved(productId) {
            showConfirmModal('Remove Saved Item', 'Are you sure you want to permanently remove this item?', async () => {
                try {
                    const response = await fetch(`/api/saved-for-later/remove/${productId}`, {
                        method: 'DELETE'
                    });
                    
                    if (response.ok) {
                        await loadSavedForLater();
                        showNotification('Item removed');
                    }
                } catch (error) {
                    console.error('Error removing saved item:', error);
                }
            });
        }

    <style>
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: #1a1a1a;
            border: 2px solid #D4AF37;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            color: #fff;
            text-align: center;
        }
        
        .modal-content h3 {
            color: #D4AF37;
            margin-bottom: 15px;
            font-family: 'Playfair Display', serif;
        }
        
        .modal-content p {
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-btn-ok {
            background: linear-gradient(135deg, #D4AF37, #F4D03F);
            color: #000;
        }
        
        .modal-btn-ok:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }
        
        .modal-btn-cancel {
            background: #333;
            color: #fff;
        }
        
        .modal-btn-cancel:hover {
            background: #444;
        }
        
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }
    </style>

</body>
</html>