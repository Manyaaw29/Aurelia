<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurelia - My Account</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="account.css">

</head>

<body>
    
<!-- Enhanced Header -->
<header class="header">
    <div class="header-container">
        <a href="homepage.html" class="logo">Aurelia</a>
        
        <nav class="nav-links">
            <a href="product.html" class="nav-link">Latest Collections</a>
            <div class="dropdown">
                <button class="dropbtn nav-link">
                    Categories <span class="dropdown-arrow">‚ñº</span>
                </button>
                <div class="dropdown-content">
                    <a href="rings.html">Rings</a>
                    <a href="bracelets.html">Bracelets</a>
                    <a href="earrings.html">Earrings</a>
                    <a href="necklaces.html">Necklaces</a>
                </div>
            </div>
            <a href="customerstories.html" class="nav-link" target="_blank">Customer Stories</a>
            <a href="about_us.html" class="nav-link">About Us</a>
        </nav>

        <div class="search-box">
            <input type="text" class="search-input" placeholder="Search jewelry...">
        </div>

        <div class="nav-actions">
            <a href="wishlist.html" class="nav-icon wishlist-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
            </a>
            <a href="account.html" class="nav-icon account-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </a>
            <a href="cart.html" class="nav-icon cart-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
            </a>
        </div>
    </div>
</header>


    <div class="account-container">
        <div class="account-header">
            <h1 class="account-title">My Account</h1>
            <p class="account-subtitle">Manage your personal information and preferences</p>
        </div>

        <aside class="account-sidebar">
            <ul class="sidebar-menu">
                <li>
                    <a href="#personal-info" class="active">
                        <span class="menu-icon">üë§</span>
                        Personal Information
                    </a>
                </li>
                <li>
                    <a href="myorder.html">
                        <span class="menu-icon">üì¶</span>
                        My Orders
                    </a>
                </li>
                <li>
                    <a href="wishlist.html">
                        <span class="menu-icon">‚ù§</span>
                        My Wishlist
                    </a>
                </li>
                <li>
                    <a href="address.html">
                        <span class="menu-icon">üìç</span>
                        My Addresses
                    </a>
                </li>
                <li>
                    <a href="#" id="signOutLink">
                        <span class="menu-icon">üö™</span>
                        Sign Out
                    </a>
                </li>
            </ul>
        </aside>

        <main class="account-content">
            <div class="content-header">
                <h2 class="content-title">Personal Information</h2>
                <p class="content-description">Update your personal details to keep your account information current</p>
            </div>

            <form class="account-form" id="accountForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="firstName">First Name</label>
                        <input type="text" id="firstName" class="form-input" placeholder="Enter your first name"
                            value="Priya">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="lastName">Last Name</label>
                        <input type="text" id="lastName" class="form-input" placeholder="Enter your last name"
                            value="Sharma">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label class="form-label" for="email">Email Address</label>
                        <input type="email" id="email" class="form-input" placeholder="Enter your email"
                            value="priya.sharma@example.com">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label class="form-label" for="contact">Contact Number</label>
                        <input type="tel" id="contact" class="form-input" placeholder="+91 XXXXX XXXXX"
                            value="+91 98765 43210">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="birthday">Birthday</label>
                        <input type="date" id="birthday" class="form-input" value="1995-06-15">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="gender">How do you identify yourself?</label>
                        <select id="gender" class="form-select">
                            <option value="">Select</option>
                            <option value="female" selected>Female</option>
                            <option value="male">Male</option>
                            <option value="non-binary">Non-Binary</option>
                            <option value="prefer-not">Prefer not to say</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Changes</button>
                    <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="button" class="btn-tertiary" id="changePasswordBtn">Change Password</button>
                </div>
            </form>
        </main>
    </div>

    <div class="modal-overlay" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">‚úì</div>
            <h2 class="modal-title">Changes Saved!</h2>
            <p class="modal-message">Your personal information has been updated successfully.</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="closeSuccessModal">OK</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="signOutModal">
        <div class="modal-content">
            <div class="modal-icon">üö™</div>
            <h2 class="modal-title">Sign Out</h2>
            <p class="modal-message">Are you sure you want to sign out?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="confirmSignOut">Sign Out</button>
                <button type="button" class="modal-btn modal-btn-secondary" id="cancelSignOut">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="successSignOutModal">
        <div class="modal-content">
            <div class="modal-icon success-icon">‚úì</div>
            <h2 class="modal-title">Successfully Signed Out!</h2>
            <p class="modal-message">You have been signed out successfully. Redirecting to sign in page...</p>
        </div>
    </div>
    
    <div class="modal-overlay" id="passwordModal">
        <div class="modal-content">
            <div class="modal-icon">üîë</div>
            <h2 class="modal-title">Change Password</h2>
            <p class="modal-message">Enter your current password and a new secure password.</p>
            <form id="passwordForm">
                <div class="modal-form-group">
                    <label class="form-label" for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" class="form-input" placeholder="Your current password" required>
                </div>
                <div class="modal-form-group">
                    <label class="form-label" for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-input" placeholder="Your new password" required>
                </div>
                <div class="modal-form-group">
                    <label class="form-label" for="confirmNewPassword">Re-enter New Password</label>
                    <input type="password" id="confirmNewPassword" class="form-input" placeholder="Confirm new password" required>
                </div>
                <div id="passwordError" class="password-error" style="display: none;"></div>
                
                <div class="modal-buttons" style="margin-top: 30px;">
                    <button type="submit" class="modal-btn modal-btn-primary">Save Changes</button>
                    <button type="button" class="modal-btn modal-btn-secondary" id="cancelPasswordChange">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="passwordSuccessModal">
        <div class="modal-content">
            <div class="modal-icon success-icon">‚úì</div>
            <h2 class="modal-title">Password Updated!</h2>
            <p class="modal-message">Your password has been successfully changed.</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="closePasswordSuccessModal">OK</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="newsletter">
                <h3>Stay Connected</h3>
                <p style="color: #CCCCCC; margin-bottom: 20px;">Subscribe to our newsletter for exclusive offers and new
                    arrivals</p>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" class="newsletter-input" placeholder="Enter your email" required>
                    <button type="submit" class="newsletter-button">Subscribe</button>
                </form>
            </div>

            <div class="footer-links">
                <h4>About</h4>
                <ul>
                    <li><a href="#">Our Story</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Press</a></li>
                </ul>
            </div>

            <div class="footer-links">
                <h4>Support</h4>
                <ul>
                    <li><a href="#">Shipping</a></li>
                    <li><a href="#">Returns</a></li>
                    <li><a href="#">Size Guide</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>

            <div class="footer-links">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Cookies</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p style="color: #CCCCCC; font-size: 0.9rem;">¬© 2024 Aurelia Jewelry. All rights reserved.</p>
            <div class="social-icons">
                <a href="https://instagram.com" class="social-icon" target="_blank">
                    <i class="fab fa-instagram"
                        style="color: #D4AF37; font-size: 16px; line-height: 35px; text-align: center; width: 100%;"></i>
                </a>
                <a href="https://facebook.com" class="social-icon" target="_blank">
                    <i class="fab fa-facebook-f"
                        style="color: #D4AF37; font-size: 16px; line-height: 35px; text-align: center; width: 100%;"></i>
                </a>
                <a href="https://pinterest.com" class="social-icon" target="_blank">
                    <i class="fab fa-pinterest-p"
                        style="color: #D4AF37; font-size: 16px; line-height: 35px; text-align: center; width: 100%;"></i>
                </a>
                <a href="https://twitter.com" class="social-icon" target="_blank">
                    <i class="fab fa-twitter"
                        style="color: #D4AF37; font-size: 16px; line-height: 35px; text-align: center; width: 100%;"></i>
                </a>
            </div>
        </div>
    </footer>
    <script>
        // --- MODAL & GLOBAL HELPERS ---

        function openModal(modalElement) {
            modalElement.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalElement) {
            modalElement.classList.remove('active');
            // Only restore scroll if no other modals are active
            if (!document.querySelectorAll('.modal-overlay.active').length) {
                document.body.style.overflow = 'auto';
            }
        }
        
        // Helper function to show password errors
        function showPasswordError(message) {
            const errorElement = document.getElementById('passwordError');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // Helper function to clear password errors
        function clearPasswordError() {
            document.getElementById('passwordError').style.display = 'none';
            document.getElementById('passwordError').textContent = '';
        }


        // --- SIGN OUT MODAL FUNCTIONALITY ---
        const signOutLink = document.getElementById('signOutLink');
        const signOutModal = document.getElementById('signOutModal');
        const successSignOutModal = document.getElementById('successSignOutModal');
        const confirmSignOut = document.getElementById('confirmSignOut');
        const cancelSignOut = document.getElementById('cancelSignOut');

        // Open modal when sign out link is clicked
        signOutLink.addEventListener('click', function (e) {
            e.preventDefault();
            openModal(signOutModal);
        });

        // Close modal when cancel is clicked
        cancelSignOut.addEventListener('click', function () {
            closeModal(signOutModal);
        });

        // Show success message and redirect when confirm is clicked
        confirmSignOut.addEventListener('click', function () {
            closeModal(signOutModal);
            openModal(successSignOutModal);
            
            // Redirect to signin.html after 3 seconds
            setTimeout(function() {
                window.location.href = 'signin.html';
            }, 3000);
        });

        // Close modal when clicking outside of it
        signOutModal.addEventListener('click', function (e) {
            if (e.target === signOutModal) {
                closeModal(signOutModal);
            }
        });

        // --- CHANGE PASSWORD MODAL FUNCTIONALITY (NEW) ---
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        const passwordModal = document.getElementById('passwordModal');
        const passwordForm = document.getElementById('passwordForm');
        const cancelPasswordChange = document.getElementById('cancelPasswordChange');
        const passwordSuccessModal = document.getElementById('passwordSuccessModal');
        const closePasswordSuccessModal = document.getElementById('closePasswordSuccessModal');

        // Open password modal
        changePasswordBtn.addEventListener('click', function() {
            clearPasswordError(); // Clear any previous error
            openModal(passwordModal);
        });

        // Close password modal (Cancel button)
        cancelPasswordChange.addEventListener('click', function() {
            passwordForm.reset(); // Clear form on cancel
            clearPasswordError(); // Clear any previous error
            closeModal(passwordModal);
        });

        // Password form submission
        passwordForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            clearPasswordError();

            const currentPass = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmNewPassword').value;
            
            // NOTE: In a real application, you would make an AJAX call to a server
            // to securely check the current password against the stored hash and update the new one.
            // For this demonstration, we are using a simulated stored password.
            const CORRECT_CURRENT_PASSWORD = "mySecurePassword123"; 

            // 1. Check if new passwords match
            if (newPass !== confirmPass) {
                showPasswordError("Passwords don't match. Please re-enter.");
                document.getElementById('confirmNewPassword').focus();
                return;
            }

            // 2. Check current password validity (Simulated check)
            if (currentPass !== CORRECT_CURRENT_PASSWORD) {
                showPasswordError("The current password you entered is incorrect.");
                document.getElementById('currentPassword').focus();
                return;
            }
            
            // 3. Simple length/empty check (If all passes, check if fields are empty)
            if (!currentPass || !newPass || !confirmPass) {
                 showPasswordError("Please fill in all password fields.");
                return;
            }
            
            // If all validation passes:
            console.log('Password successfully changed to:', newPass);

            // Close the password modal and show success modal
            closeModal(passwordModal);
            openModal(passwordSuccessModal);
            
            passwordForm.reset(); // Clear the form fields
        });

        // Close Password Success Modal
        closePasswordSuccessModal.addEventListener('click', function() {
            closeModal(passwordSuccessModal);
        });

        // Close modal when clicking outside of it
        passwordModal.addEventListener('click', function (e) {
            if (e.target === passwordModal) {
                passwordForm.reset();
                clearPasswordError();
                closeModal(passwordModal);
            }
        });
        passwordSuccessModal.addEventListener('click', function (e) {
            if (e.target === passwordSuccessModal) {
                closeModal(passwordSuccessModal);
            }
        });
        
        // --- PERSONAL INFO FORM FUNCTIONALITY (Existing Code) ---
        const accountForm = document.getElementById('accountForm');
        const successModal = document.getElementById('successModal');
        const closeSuccessModal = document.getElementById('closeSuccessModal');
        const contactInput = document.getElementById('contact');

        // Store original values
        let originalValues = {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            email: document.getElementById('email').value,
            contact: document.getElementById('contact').value,
            birthday: document.getElementById('birthday').value,
            gender: document.getElementById('gender').value
        };

        // Validation message helper function
        function showValidationMessage(message) {
            // Remove any existing validation message
            const existingMessage = document.querySelector('.validation-message');
            if (existingMessage) {
                existingMessage.remove();
            }

            // Create and show validation message
            const validationMsg = document.createElement('div');
            validationMsg.className = 'validation-message';
            validationMsg.textContent = message;
            validationMsg.style.cssText = `
                color: #ff4444;
                font-size: 13px;
                margin-top: 5px;
                padding: 8px 12px;
                background: #fff5f5;
                border-radius: 4px;
                border-left: 3px solid #ff4444;
            `;

            contactInput.parentElement.appendChild(validationMsg);

            // Remove message after 5 seconds
            setTimeout(() => {
                validationMsg.remove();
            }, 5000);
        }

        // Phone Number Validation
        contactInput.addEventListener('input', function (e) {
            // Remove any non-numeric characters except + and spaces
            let value = e.target.value.replace(/[^\d+\s]/g, '');
            e.target.value = value;
        });

        contactInput.addEventListener('blur', function (e) {
            const phoneNumber = e.target.value.replace(/\s/g, '');

            // Indian phone number validation
            const indianPhoneRegex = /^\+91\d{10}$/;

            if (phoneNumber && !indianPhoneRegex.test(phoneNumber)) {
                e.target.style.borderColor = '#ff4444';
                showValidationMessage('Please enter a valid Indian phone number (+91 followed by 10 digits)');
            } else {
                e.target.style.borderColor = ''; // Reset border color
                // Remove validation message if exists
                const existingMessage = document.querySelector('.validation-message');
                if (existingMessage) {
                    existingMessage.remove();
                }
            }
        });

        // Form submission with validation
        accountForm.addEventListener('submit', function (e) {
            e.preventDefault();

            // Validate phone number before submitting
            const phoneNumber = document.getElementById('contact').value.replace(/\s/g, '');
            const indianPhoneRegex = /^\+91\d{10}$/;

            if (!indianPhoneRegex.test(phoneNumber)) {
                contactInput.style.borderColor = '#ff4444';
                showValidationMessage('Please enter a valid Indian phone number (+91 followed by 10 digits)');
                contactInput.focus();
                return;
            }

            // Update original values with new ones
            originalValues = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                contact: document.getElementById('contact').value,
                birthday: document.getElementById('birthday').value,
                gender: document.getElementById('gender').value
            };

            // Show success modal
            openModal(successModal);

            // Here you would typically send the data to a server
            console.log('Personal Info Form submitted with values:', originalValues);
        });

        // Close success modal
        closeSuccessModal.addEventListener('click', function () {
            closeModal(successModal);
        });

        // Close modal when clicking outside
        successModal.addEventListener('click', function (e) {
            if (e.target === successModal) {
                closeModal(successModal);
            }
        });

        // Cancel Button Handler
        const cancelBtn = document.getElementById('cancelBtn');
        cancelBtn.addEventListener('click', function () {
            // Restore original values (no changes applied)
            document.getElementById('firstName').value = originalValues.firstName;
            document.getElementById('lastName').value = originalValues.lastName;
            document.getElementById('email').value = originalValues.email;
            document.getElementById('contact').value = originalValues.contact;
            document.getElementById('birthday').value = originalValues.birthday;
            document.getElementById('gender').value = originalValues.gender;

            // Reset border colors and remove validation messages
            contactInput.style.borderColor = '';
            const existingMessage = document.querySelector('.validation-message');
            if (existingMessage) {
                existingMessage.remove();
            }
        });

        // --- OTHER UTILITIES (Existing Code) ---

        // Newsletter Form Handler
        const newsletterForm = document.getElementById('newsletterForm');
        newsletterForm.addEventListener('submit', function (e) {
            e.preventDefault();
            const emailInput = this.querySelector('.newsletter-input');
            alert(`Thank you for subscribing with ${emailInput.value}!`);
            emailInput.value = '';
        });

        // Search Input Handler
        const searchInput = document.querySelector('.search-input');
        searchInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const searchTerm = this.value.trim();
                if (searchTerm) {
                    alert(`Searching for: ${searchTerm}`);
                }
            }
        });

        // Active Menu Item Highlight
        const menuLinks = document.querySelectorAll('.sidebar-menu a');
        menuLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                menuLinks.forEach(l => l.classList.remove('active'));
                if (this.id !== 'signOutLink') {
                    this.classList.add('active');
                }
            });
        });

        // Form Input Focus Animation
        const formInputs = document.querySelectorAll('.form-input, .form-select');
        formInputs.forEach(input => {
            input.addEventListener('focus', function () {
                this.style.transform = 'scale(1.01)';
            });

            input.addEventListener('blur', function () {
                this.style.transform = 'scale(1)';
            });
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                // Exclude the sign out link from smooth scroll logic
                if (href !== '#' && this.id !== 'signOutLink') { 
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
</script>
</body>

</html>
